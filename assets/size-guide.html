<!-- La idea es copiar el html del sitio original para las tallas y dejar el <style> y <script>
que se encuentra en este archivo, para que se mantenga el diseÃ±o y funcionalidad original. -->

<div class="js-overlay__wrapper size-guide-overlay__wrapper active" aria-labelledby="Sizeguide_heading"
    aria-hidden="false" tabindex="1" role="dialog" aria-modal="true" style="top: 89px; left: 306px;"><button
        aria-label="Close Modal" type="button" data-overlay="#size_guide_overlay" class="js-overlay__close"><span
            class="sr-only">Close the modal window</span><span aria-hidden="true" class="close-icon"></span></button>
    <h2 class="js-overlay__title undefined" id="Sizeguide_heading">Size guide</h2>
    <div class="size-guide-overlay__content js-overlay__content-scroll no-swipe">
        <ul class="tabs" data-gender-code="WOMEN" role="tablist">
            <li role="presentation">
                <button class="tab-title" id="sizeguide-EU-WOMEN-tab" aria-selected="false" tabindex="-1"
                    data-gender="WOMEN" aria-controls="tabSize-EU-WOMEN" role="tab">
                    <a href="#tabSize-EU-WOMEN" class="js-tab" id="sizeguide-EU-WOMEN-tab-link">Women</a>
                </button>
            </li>
            <li role="presentation">
                <button class="tab-title" id="sizeguide-EU-MEN-tab" aria-selected="false" tabindex="-1"
                    data-gender="MEN" aria-controls="tabSize-EU-MEN" role="tab">
                    <a href="#tabSize-EU-MEN" class="js-tab" id="sizeguide-EU-MEN-tab-link">Men</a>
                </button>
            </li>
            <li role="presentation">
                <button class="tab-title active" id="sizeguide-EU-KIDS-tab" aria-selected="true" tabindex="0"
                    data-gender="KIDS" aria-controls="tabSize-EU-KIDS" role="tab">
                    <a href="#tabSize-EU-KIDS" class="js-tab" id="sizeguide-EU-KIDS-tab-link">Kids</a>
                </button>
            </li>
        </ul>

        <div class="tabs-content">
            <p class="size-guide-recommendation-text">
                True to size</p>
            <div class="content" id="tabSize-EU-WOMEN">

                <div class="sizeguide-mobile-scroll-container">
                    <table class="sizeguide-table">
                        <caption>
                            <div class="table-name-and-toggle">
                                <h3 class="table-info">Footwear</h3>
                                <div role="tablist" aria-label="Measurement Unit Toggle" class="toggle hide">
                                    <button role="tab" tabindex="0"
                                        class="measurementUnit-toggle inch-toggle selected">INCH</button>
                                    <span class="toggle-line"></span>
                                    <button role="tab" tabindex="0" class="measurementUnit-toggle cm-toggle">CM</button>
                                </div>
                            </div>
                        </caption>
                        <tbody>
                            <tr>
                                <th scope="col" class="">UK</th>
                                <th scope="col" class="">Europe</th>
                                <th scope="col" class="">USA</th>
                                <th scope="col" class="">Japan</th>
                            </tr>
                            <tr>
                                <th scope="row" class="">3</th>
                                <td class="">36</td>
                                <td class="">5</td>
                                <td class="">22</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">4</th>
                                <td class="">37</td>
                                <td class="">6</td>
                                <td class="">23</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">5</th>
                                <td class="">38</td>
                                <td class="">7</td>
                                <td class="">23.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">6</th>
                                <td class="">39</td>
                                <td class="">8</td>
                                <td class="">24.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">6.5</th>
                                <td class="">40</td>
                                <td class="">8.5</td>
                                <td class="">25</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">7</th>
                                <td class="">41</td>
                                <td class="">9</td>
                                <td class="">25.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">8</th>
                                <td class="">42</td>
                                <td class="">10</td>
                                <td class="">26</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">9</th>
                                <td class="">43</td>
                                <td class="">11</td>
                                <td class="">27</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="size-guide-spacer no-swipe"></div>
            </div>
            <div class="content" id="tabSize-EU-MEN">

                <div class="sizeguide-mobile-scroll-container">
                    <table class="sizeguide-table">
                        <caption>
                            <div class="table-name-and-toggle">
                                <h3 class="table-info">Footwear</h3>
                                <div role="tablist" aria-label="Measurement Unit Toggle" class="toggle hide">
                                    <button role="tab" tabindex="0"
                                        class="measurementUnit-toggle inch-toggle selected">INCH</button>
                                    <span class="toggle-line"></span>
                                    <button role="tab" tabindex="0" class="measurementUnit-toggle cm-toggle">CM</button>
                                </div>
                            </div>
                        </caption>
                        <tbody>
                            <tr>
                                <th scope="col" class="">UK</th>
                                <th scope="col" class="">Europe</th>
                                <th scope="col" class="">USA</th>
                                <th scope="col" class="">Japan</th>
                            </tr>
                            <tr>
                                <th scope="row" class="">6</th>
                                <td class="">39</td>
                                <td class="">7</td>
                                <td class="">24.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">6.5</th>
                                <td class="">40</td>
                                <td class="">7.5</td>
                                <td class="">25</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">7</th>
                                <td class="">41</td>
                                <td class="">8</td>
                                <td class="">25.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">8</th>
                                <td class="">42</td>
                                <td class="">9</td>
                                <td class="">26</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">9</th>
                                <td class="">43</td>
                                <td class="">10</td>
                                <td class="">27</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">9.5</th>
                                <td class="">44</td>
                                <td class="">10.5</td>
                                <td class="">27.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">10</th>
                                <td class="">45</td>
                                <td class="">11</td>
                                <td class="">28</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">11</th>
                                <td class="">46</td>
                                <td class="">12</td>
                                <td class="">29</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">12</th>
                                <td class="">47</td>
                                <td class="">13</td>
                                <td class="">29.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">13</th>
                                <td class="">48</td>
                                <td class="">14</td>
                                <td class=""></td>
                            </tr>
                            <tr>
                                <th scope="row" class="">14</th>
                                <td class="">49.5</td>
                                <td class="">15</td>
                                <td class=""></td>
                            </tr>
                            <tr>
                                <th scope="row" class="">15</th>
                                <td class="">51</td>
                                <td class="">16</td>
                                <td class=""></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="size-guide-spacer no-swipe"></div>
            </div>
            <div class="content active" id="tabSize-EU-KIDS">

                <div class="sizeguide-mobile-scroll-container">
                    <table class="sizeguide-table">
                        <caption>
                            <div class="table-name-and-toggle">
                                <h3 class="table-info">Newborn Footwear</h3>
                                <div role="tablist" aria-label="Measurement Unit Toggle" class="toggle hide">
                                    <button role="tab" tabindex="0"
                                        class="measurementUnit-toggle inch-toggle selected">INCH</button>
                                    <span class="toggle-line"></span>
                                    <button role="tab" tabindex="0" class="measurementUnit-toggle cm-toggle">CM</button>
                                </div>
                            </div>
                        </caption>
                        <tbody>
                            <tr>
                                <th scope="col" class="">Foot length</th>
                                <th scope="col" class="">Age (approx)</th>
                                <th scope="col" class="">UK</th>
                                <th scope="col" class="">Europe</th>
                                <th scope="col" class="">USA</th>
                                <th scope="col" class="">Japan</th>
                            </tr>
                            <tr>
                                <th scope="row" class="">3.82"</th>
                                <td class="">0-3 Months</td>
                                <td class="">0</td>
                                <td class="">16</td>
                                <td class="">1</td>
                                <td class="">8</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">4.15"</th>
                                <td class="">3-6 Months</td>
                                <td class="">1</td>
                                <td class="">17</td>
                                <td class="">2</td>
                                <td class="">9</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">4.49"</th>
                                <td class="">6-9 Months</td>
                                <td class="">2</td>
                                <td class="">18</td>
                                <td class="">3</td>
                                <td class="">10</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">4.82"</th>
                                <td class="">9-12 Months</td>
                                <td class="">3</td>
                                <td class="">19</td>
                                <td class="">4</td>
                                <td class="">11</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="sizeguide-mobile-scroll-container">
                    <table class="sizeguide-table">
                        <caption>
                            <div class="table-name-and-toggle">
                                <h3 class="table-info">Toddler Footwear</h3>
                                <div role="tablist" aria-label="Measurement Unit Toggle" class="toggle hide">
                                    <button role="tab" tabindex="0"
                                        class="measurementUnit-toggle inch-toggle selected">INCH</button>
                                    <span class="toggle-line"></span>
                                    <button role="tab" tabindex="0" class="measurementUnit-toggle cm-toggle">CM</button>
                                </div>
                            </div>
                        </caption>
                        <tbody>
                            <tr>
                                <th scope="col" class="">UK</th>
                                <th scope="col" class="">Europe</th>
                                <th scope="col" class="">USA</th>
                                <th scope="col" class="">Japan</th>
                            </tr>
                            <tr>
                                <th scope="row" class="">3</th>
                                <td class="">19</td>
                                <td class="">4</td>
                                <td class="">11</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">3.5</th>
                                <td class="">19.5</td>
                                <td class="">4.5</td>
                                <td class="">11.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">4</th>
                                <td class="">20</td>
                                <td class="">5</td>
                                <td class="">12</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">4.5</th>
                                <td class="">21</td>
                                <td class="">5.5</td>
                                <td class="">12.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">5</th>
                                <td class="">21.5</td>
                                <td class="">6</td>
                                <td class="">12.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">5.5</th>
                                <td class="">22</td>
                                <td class="">6.5</td>
                                <td class="">13.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">6</th>
                                <td class="">22.5</td>
                                <td class="">7</td>
                                <td class="">14</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">7</th>
                                <td class="">24</td>
                                <td class="">8</td>
                                <td class="">14.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">7.5</th>
                                <td class="">25</td>
                                <td class="">8.5</td>
                                <td class="">15</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">8</th>
                                <td class="">26</td>
                                <td class="">9</td>
                                <td class="">15</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">8.5</th>
                                <td class="">27</td>
                                <td class="">9.5</td>
                                <td class="">15.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">9</th>
                                <td class=""></td>
                                <td class="">10</td>
                                <td class="">16</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="sizeguide-mobile-scroll-container">
                    <table class="sizeguide-table">
                        <caption>
                            <div class="table-name-and-toggle">
                                <h3 class="table-info">Junior Footwear</h3>
                                <div role="tablist" aria-label="Measurement Unit Toggle" class="toggle hide">
                                    <button role="tab" tabindex="0"
                                        class="measurementUnit-toggle inch-toggle selected">INCH</button>
                                    <span class="toggle-line"></span>
                                    <button role="tab" tabindex="0" class="measurementUnit-toggle cm-toggle">CM</button>
                                </div>
                            </div>
                        </caption>
                        <tbody>
                            <tr>
                                <th scope="col" class="">UK</th>
                                <th scope="col" class="">Europe</th>
                                <th scope="col" class="">USA</th>
                                <th scope="col" class="">Japan</th>
                            </tr>
                            <tr>
                                <th scope="row" class="">10</th>
                                <td class="">28</td>
                                <td class="">11</td>
                                <td class="">17</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">10.5</th>
                                <td class="">28.5</td>
                                <td class="">11.5</td>
                                <td class="">17.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">11</th>
                                <td class="">29</td>
                                <td class="">12</td>
                                <td class="">11</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">11.5</th>
                                <td class="">30</td>
                                <td class="">12.5</td>
                                <td class="">11.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">12</th>
                                <td class="">31</td>
                                <td class="">13</td>
                                <td class="">18.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">12.5</th>
                                <td class="">32</td>
                                <td class="">13.5</td>
                                <td class="">19</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">13</th>
                                <td class="">32.5</td>
                                <td class="">1</td>
                                <td class="">19.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">13.5</th>
                                <td class="">33</td>
                                <td class="">1.5</td>
                                <td class="">20</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">1</th>
                                <td class="">33.5</td>
                                <td class="">2</td>
                                <td class="">20.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">1.5</th>
                                <td class="">34</td>
                                <td class="">2.5</td>
                                <td class="">21</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">2</th>
                                <td class="">35</td>
                                <td class="">3</td>
                                <td class="">21.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">2.5</th>
                                <td class="">36</td>
                                <td class="">3.5</td>
                                <td class="">21.5</td>
                            </tr>
                            <tr>
                                <th scope="row" class="">3</th>
                                <td class=""></td>
                                <td class="">4</td>
                                <td class="">22</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="size-guide-spacer no-swipe"></div>
            </div>
        </div>
    </div>
</div>

<style>
    .size-guide-overlay__wrapper {
        background-color: #FDFDFD;
        color: #101010;
        overflow-y: auto;
        height: 100vh;
    }

    .size-guide-overlay__wrapper .hide {
        display: none !important;
    }

    .size-guide-overlay__wrapper .js-overlay__title {
        font-weight: 800;
        text-transform: uppercase;
        font-size: 1.25rem;
        line-height: 1.375rem;
        margin: 30px 50px 5px 20px;
        word-break: break-all;
    }

    .size-guide-overlay__wrapper .js-overlay__title.white {
        color: #FDFDFD;
    }

    .size-guide-overlay__wrapper .js-overlay__close {
        display: none;
    }

    @media only screen and (min-width: 768px) {
        .size-guide-overlay__wrapper {
            height: 80%;
        }

        .size-guide-overlay__wrapper .js-overlay__title {
            margin: 15px 50px 15px 40px;
        }
    }

    .size-guide-overlay__wrapper.active {
        background-image: none;
    }

    .size-guide-overlay__content {
        margin: 0 40px;
        height: calc(100% - 140px);
    }

    .size-guide-overlay__content.no-swipe {
        height: calc(100% - 100px);
    }

    @media only screen and (max-width: 767px) {
        .size-guide-overlay__content {
            margin: 0 20px;
        }
    }

    .size-guide-overlay__content .sizeguide-table {
        width: 100%;
    }

    .size-guide-overlay__content .tabhead {
        font-weight: 700;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.5px;
        font-size: 1.875rem;
    }

    .size-guide-overlay__content tbody {
        display: table-row-group;
        vertical-align: middle;
        border-color: inherit;
    }

    .size-guide-overlay__content .tabs {
        margin: 10px 0 15px;
        padding: 0;
        display: flex;
        list-style: none;
    }

    .size-guide-overlay__content .tabs button {
        border: none;
        background: none;
        margin-right: 0 !important;
    }

    .size-guide-overlay__content .tabs .tab-title {
        display: inline-table;
        margin-right: 10px;
    }

    .size-guide-overlay__content .tabs .tab-title a {
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.25px;
        text-transform: capitalize;
        font-size: 16px;
        padding: 10px 15px;
        border: 1px #828282 solid;
        border-radius: 2px;
        min-width: 85px;
        display: flex;
        justify-content: center;
        --button-color: currentColor;
        text-decoration: none;
    }

    .size-guide-overlay__content .tabs .tab-title.active a {
        font-weight: 700;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.5px;
        border: 2px #101010 solid;
    }

    .size-guide-overlay__content .how-to-measure-button,
    .size-guide-overlay__content .back-to-sizeguide-button {
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.25px;
        text-decoration: underline;
        cursor: pointer;
        width: 100%;
        background-color: transparent;
        border-radius: 2px;
        border: 1px #222222 solid;
        padding: 10px 15px;
    }

    .size-guide-overlay__content .how-to-measure-button:hover,
    .size-guide-overlay__content .back-to-sizeguide-button:hover {
        text-decoration: underline;
    }

    .size-guide-overlay__content .how-to-measure-button .arrow-right-icon {
        position: relative;
        display: inline-block;
        width: 8px;
        height: 14px;
        background-image: url('../_ui/responsive/theme-dm/images/icons/arrow-right-large.png');
        background-size: cover;
        margin-left: 10px;
    }

    .size-guide-overlay__content .back-to-sizeguide-button .arrow-left-icon {
        position: relative;
        display: inline-block;
        width: 8px;
        height: 14px;
        background-image: url('../_ui/responsive/theme-dm/images/icons/arrow-left-large.png');
        background-size: cover;
        margin-right: 10px;
    }

    .size-guide-overlay__content .how-to-measure-content .how-to-measure-title {
        font-weight: 800;
        text-transform: uppercase;
        font-size: 1rem;
        line-height: 1.125rem;
        margin-bottom: 20px;
    }

    .size-guide-overlay__content .tabs-content .size-guide-recommendation-text {
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.25px;
        background-color: #F7F7F7;
        width: 100%;
        padding: 10px 20px;
        margin-top: 15px;
        margin-bottom: 0;
    }

    .size-guide-overlay__content .tabs-content .content {
        display: none;
        text-transform: uppercase;
    }

    .size-guide-overlay__content .tabs-content .content.active {
        display: block;
    }

    .size-guide-overlay__content .tabs-content .content table {
        width: 100%;
        table-layout: auto;
        font-weight: 800;
        text-transform: uppercase;
        font-size: 1rem;
        line-height: 1.125rem;
    }

    @media only screen and (min-width: 1024px) {
        .size-guide-overlay__content .tabs-content .content table {
            table-layout: auto;
        }
    }

    .size-guide-overlay__content .tabs-content .content table tbody {
        border: 1px solid #222222;
    }

    .size-guide-overlay__content .tabs-content .content table caption {
        color: #101010;
        padding: 0;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle {
        display: flex;
        justify-content: space-between;
        margin: 30px 0 20px 0;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle h3 {
        font-weight: 800;
        text-transform: uppercase;
        font-size: 1rem;
        line-height: 1.125rem;
        margin: 0;
        color: #101010;
        text-align: left;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle .toggle {
        display: flex;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle .toggle button {
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.25px;
        margin: 0;
        padding: 0 5px;
        border: none;
        background: transparent;
        cursor: pointer;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle .toggle p:hover {
        text-decoration: underline;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle .toggle .selected {
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.25px;
        text-decoration: underline;
        cursor: pointer;
    }

    .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle .toggle .toggle-line {
        width: 1px;
        background-color: #101010;
    }

    @media only screen and (min-width: 749px) {
        .size-guide-overlay__content .tabs-content .content table .table-name-and-toggle {
            margin: 30px 0 35px 0;
        }
    }

    .size-guide-overlay__content .tabs-content .content table .sizeguide-mobile-scroll-container {
        overflow-x: auto;
        padding-bottom: 20px;
        width: 100%;
    }

    .size-guide-overlay__content .tabs-content .content table tr {
        display: table-row;
    }

    .size-guide-overlay__content .tabs-content .content table tr th,
    .size-guide-overlay__content .tabs-content .content table tr td {
        padding: 15px 10px;
        min-width: 75px;
        text-align: center;
    }

    .size-guide-overlay__content .tabs-content .content table tr th {
        font-weight: 800;
        text-transform: uppercase;
        font-size: 0.875rem;
        line-height: 1rem;
        border: 1px solid #222222;
        border-bottom: 2px solid #101010;
        background-color: #FDFDFD !important;
    }

    .size-guide-overlay__content .tabs-content .content table tr td:nth-child(odd) {
        background-color: #F7F7F7;
    }

    .size-guide-overlay__content .tabs-content .content table tr td {
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.375rem;
        letter-spacing: 0.25px;
        border-bottom: 1px solid #464646;
        border-right: 1px solid #222222;
    }

    .size-guide-overlay__content .tabs-content .content .size-guide-spacer {
        height: 0;
    }

    @media only screen and (max-width: 749px) {
        .size-guide-overlay__content .tabs-content .content .size-guide-spacer {
            height: 60px;
        }

        .size-guide-overlay__content .tabs-content .content .size-guide-spacer.no-swipe {
            height: 0;
        }
    }
</style>

<script>
    (() => {
        const wrapper = document.querySelector('.size-guide-overlay__wrapper');
        if (!wrapper) return;

        const activateOnInput = (element, handler) => {
            element.addEventListener('click', (event) => {
                event.preventDefault();
                handler();
            });

            element.addEventListener('keydown', (event) => {
                if (event.key !== 'Enter' && event.key !== ' ') return;
                event.preventDefault();
                handler();
            });
        };

        const initTabs = () => {
            const tabs = Array.from(wrapper.querySelectorAll('.tabs .tab-title'));
            const panels = Array.from(wrapper.querySelectorAll('.tabs-content > .content'));
            if (!tabs.length || !panels.length) return;

            const activateTab = (tab) => {
                const targetId = tab.getAttribute('aria-controls')
                    || tab.querySelector('.js-tab')?.getAttribute('href')?.replace('#', '');

                tabs.forEach((item) => {
                    const active = item === tab;
                    item.classList.toggle('active', active);
                    item.setAttribute('aria-selected', active ? 'true' : 'false');
                    item.setAttribute('tabindex', active ? '0' : '-1');
                });

                panels.forEach((panel) => {
                    panel.classList.toggle('active', panel.id === targetId);
                });
            };

            tabs.forEach((tab) => activateOnInput(tab, () => activateTab(tab)));
            const initial = tabs.find((tab) => tab.classList.contains('active')) || tabs[0];
            activateTab(initial);
        };

        const initMeasurementToggles = () => {
            const toggleBlocks = Array.from(wrapper.querySelectorAll('.table-name-and-toggle .toggle'));
            if (!toggleBlocks.length) return;

            const parseInches = (raw) => {
                const match = raw.replace(',', '.').match(/\d+(\.\d+)?/);
                return match ? Number.parseFloat(match[0]) : Number.NaN;
            };

            const formatCm = (inches) => {
                const cm = inches * 2.54;
                const rounded = Math.round(cm * 10) / 10;
                return Number.isInteger(rounded) ? String(rounded) : rounded.toFixed(1);
            };

            toggleBlocks.forEach((toggleBlock) => {
                const table = toggleBlock.closest('table');
                const inchButton = toggleBlock.querySelector('.inch-toggle');
                const cmButton = toggleBlock.querySelector('.cm-toggle');
                if (!table || !inchButton || !cmButton) return;

                const cells = Array.from(table.querySelectorAll('tbody tr th[scope="row"], tbody tr td'));
                let hasConvertibleValues = false;

                cells.forEach((cell) => {
                    const inchValue = cell.textContent.trim();
                    if (!inchValue || !inchValue.includes('"')) return;

                    const parsed = parseInches(inchValue);
                    if (!Number.isFinite(parsed)) return;

                    cell.dataset.inchValue = inchValue;
                    cell.dataset.cmValue = formatCm(parsed);
                    hasConvertibleValues = true;
                });

                if (!hasConvertibleValues) return;

                toggleBlock.classList.remove('hide');

                const setUnit = (unit) => {
                    const isInch = unit === 'inch';

                    inchButton.classList.toggle('selected', isInch);
                    cmButton.classList.toggle('selected', !isInch);
                    inchButton.setAttribute('aria-selected', isInch ? 'true' : 'false');
                    cmButton.setAttribute('aria-selected', !isInch ? 'true' : 'false');

                    cells.forEach((cell) => {
                        if (!cell.dataset.inchValue || !cell.dataset.cmValue) return;
                        cell.textContent = isInch ? cell.dataset.inchValue : cell.dataset.cmValue;
                    });
                };

                activateOnInput(inchButton, () => setUnit('inch'));
                activateOnInput(cmButton, () => setUnit('cm'));
                setUnit('inch');
            });
        };

        const initHowToMeasure = () => {
            const openButtons = Array.from(wrapper.querySelectorAll('.how-to-measure-button'));
            const backButtons = Array.from(wrapper.querySelectorAll('.back-to-sizeguide-button'));
            const howToMeasureSections = Array.from(wrapper.querySelectorAll('.how-to-measure-content'));
            const tabsContent = wrapper.querySelector('.tabs-content');

            if (!openButtons.length || !backButtons.length || !howToMeasureSections.length || !tabsContent) return;

            const showHowToMeasure = () => {
                tabsContent.classList.add('hide');
                howToMeasureSections.forEach((section) => section.classList.remove('hide'));
            };

            const showSizeGuide = () => {
                tabsContent.classList.remove('hide');
                howToMeasureSections.forEach((section) => section.classList.add('hide'));
            };

            openButtons.forEach((button) => activateOnInput(button, showHowToMeasure));
            backButtons.forEach((button) => activateOnInput(button, showSizeGuide));
            showSizeGuide();
        };

        initTabs();
        initMeasurementToggles();
        initHowToMeasure();
    })();
</script>
