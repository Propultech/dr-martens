{% liquid
  assign product_resource = closest.product
  if request.visual_preview_mode and product_resource == blank
    assign product_resource = collections.all.products.first
  endif
-%}

{% unless product_resource == blank %}
  {% render 'variant-main-picker', product_resource: product_resource %}
{% endunless %}

{% schema %}
{
  "name": "t:names.product_variant_picker",
  "tag": null,
  "settings": [
    {
      "type": "paragraph",
      "content": "t:content.resource_reference_product_variant_picker"
    },
    {
      "type": "paragraph",
      "content": "t:content.edit_variants_in_theme_settings"
    },
    {
      "type": "select",
      "id": "variant_style",
      "label": "t:settings.style",
      "options": [
        {
          "value": "dropdowns",
          "label": "t:options.dropdowns"
        },
        {
          "value": "buttons",
          "label": "t:options.buttons"
        }
      ],
      "default": "buttons"
    },
    {
      "type": "checkbox",
      "id": "show_swatches",
      "label": "t:settings.swatches",
      "default": true
    },
    {
      "type": "text_alignment",
      "id": "alignment",
      "label": "t:settings.alignment",
      "default": "left"
    },
    {
      "type": "header",
      "content": "Guia de tallas"
    },
    {
      "type": "checkbox",
      "id": "enable_size_guide",
      "label": "Activar guia de tallas",
      "default": false
    },
    {
      "type": "text",
      "id": "size_guide_option_names",
      "label": "Opciones de talla",
      "info": "Separadas por coma. Ej: size,talla,talle | Esta opcion detecta el titulo del elemento (<legend></legend>) y lo relaciona con la guia de tallas. Si el titulo de la opcion de talla es diferente, no se mostrara el link de guia de tallas.",
      "default": "size,talla,talle",
      "visible_if": "{{ block.settings.enable_size_guide }}"
    },
    {
      "type": "text",
      "id": "size_guide_title",
      "label": "Titulo",
      "default": "Guia de tallas",
      "visible_if": "{{ block.settings.enable_size_guide }}"
    },
    {
      "type": "text",
      "id": "size_guide_link_label",
      "label": "Texto del link",
      "default": "Ver guia de tallas",
      "visible_if": "{{ block.settings.enable_size_guide }}"
    },
    {
      "type": "richtext",
      "id": "size_guide_message",
      "label": "Mensaje",
      "default": "<p>Calce: <strong>Talla real</strong>. Compra tu talla habitual.</p>",
      "visible_if": "{{ block.settings.enable_size_guide }}"
    },
    {
      "type": "page",
      "id": "size_guide_page",
      "label": "Pagina de guia de tallas",
      "info": "En el codigo de la tienda, deberia existir un archivo llamado size-guide.html, la idea es copiar el codigo en shopify solo remplazando el html, ya que esta usando el <style> y <script> casi iguales al original",
    },
    {
      "type": "checkbox",
      "id": "size_guide_show_icon_button",
      "label": "Mostrar boton icono al final de las tallas",
      "default": true,
      "visible_if": "{{ block.settings.enable_size_guide }}"
    },
    {
      "type": "select",
      "id": "size_guide_modal_behavior",
      "label": "Tipo de modal",
      "options": [
        {
          "value": "drawer",
          "label": "Lateral derecho"
        },
        {
          "value": "centered",
          "label": "Centrado"
        }
      ],
      "default": "drawer",
      "visible_if": "{{ block.settings.enable_size_guide }}"
    },
    {
      "type": "header",
      "content": "Modal de color"
    },
    {
      "type": "checkbox",
      "id": "enable_color_options_modal",
      "label": "Activar modal de color",
      "default": false
    },
    {
      "type": "text",
      "id": "color_options_option_names",
      "label": "Opciones de color",
      "info": "Separadas por coma. Ej: color,colour,colorway",
      "default": "color,colour,colorway",
      "visible_if": "{{ block.settings.enable_color_options_modal }}"
    },
    {
      "type": "text",
      "id": "color_options_button_label",
      "label": "Texto del botón",
      "default": "Ver más opciones",
      "visible_if": "{{ block.settings.enable_color_options_modal }}"
    },
    {
      "type": "text",
      "id": "color_options_modal_title",
      "label": "Título del modal",
      "default": "Más opciones de color",
      "visible_if": "{{ block.settings.enable_color_options_modal }}"
    },
    {
      "type": "page",
      "id": "color_options_page",
      "label": "Página del modal de color"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Rellenos móviles"
    },
    {
      "type": "range",
      "id": "padding-block-start-mobile",
      "label": "Arriba (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end-mobile",
      "label": "Abajo (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start-mobile",
      "label": "Izquierda (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end-mobile",
      "label": "Derecha (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "t:names.product_variant_picker",
      "category": "t:categories.product"
    }
  ]
}
{% endschema %}
