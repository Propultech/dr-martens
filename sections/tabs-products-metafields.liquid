{{ 'tabs-products-metafields.css' | asset_url | stylesheet_tag }}
{{ 'tabs-products-metafields.js' | asset_url | script_tag }}
<script
  src="{{ 'product-recommendations.js' | asset_url }}"
  type="module"
  fetchpriority="low"
></script>

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="
    section
    section--{{ section.settings.section_width }}
    color-{{ section.settings.color_scheme }}
    tabs-products-metafields
    tabs-products-metafields--align-{{ section.settings.content_alignment }}
    spacing-style
  "
  style="{% render 'spacing-style', settings: section.settings %}"
  {{ section.shopify_attributes }}
>
  {% if section.settings.heading != blank %}
    <h2 class="tp-heading">{{ section.settings.heading | escape }}</h2>
  {% endif %}

  <div class="tp-tabs">
    <div class="tp-tablist" role="tablist" aria-label="{{ section.settings.heading | default: 'Tabs' | escape }}">
      {%- assign tabs = section.blocks | where: 'type', '_tab_products' -%}
      {%- for bl in tabs -%}
        <button
          id="tp-tab-{{ bl.id }}"
          class="tp-tab{% if forloop.first %} is-active{% endif %}"
          role="tab"
          aria-controls="tp-panel-{{ bl.id }}"
          aria-selected="{% if forloop.first %}true{% else %}false{% endif %}"
          tabindex="{% if forloop.first %}0{% else %}-1{% endif %}"
        >
          {{ bl.settings.tab_title | default: 'Tab' | escape }}
        </button>
      {%- endfor -%}
    </div>

    <div class="tp-panels">
      {% content_for 'blocks' %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Tabs productos metafield",
  "class": "section-wrapper",
  "max_blocks": 6,
  "blocks": [{ "type": "_tab_products" }, { "type": "_product-card" }],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Colecciones destacadas"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Esquema de color",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Ancho",
      "options": [
        { "value": "page-width", "label": "Página" },
        { "value": "full-width", "label": "Completo" }
      ],
      "default": "page-width"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Alineación de contenido",
      "options": [
        { "value": "left", "label": "Izquierda" },
        { "value": "center", "label": "Centro" }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Arriba",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Abajo",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "Izquierda",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "Derecha",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Rellenos móviles"
    },
    {
      "type": "range",
      "id": "padding-block-start-mobile",
      "label": "Arriba (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end-mobile",
      "label": "Abajo (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start-mobile",
      "label": "Izquierda (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end-mobile",
      "label": "Derecha (móvil)",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Tabs productos metafield",
      "blocks": {
        "tab_1": {
          "type": "_tab_products",
          "settings": {
            "tab_title": "Estilos de moda"
          }
        },
        "tab_2": {
          "type": "_tab_products",
          "settings": {
            "tab_title": "Más botines 1460"
          }
        }
      },
      "block_order": ["tab_1", "tab_2"]
    }
  ]
}
{% endschema %}
